#### Ethernet 帧格式

![](/assets/18-5-1-1.png)

##### 以太网的帧格式大部分是Ethernet封装，但是这两种帧格式都支持

##### 利用目的地址和源地址之后的那个字段来区分帧格式，以太网封装的值大于1500，802.2/802.3小于1500

##### Preamble（前导码）和SFD（帧定位符），主要是告诉机器如何来区分当前比特流中那些比特是属于一个帧，因为从物理层上接受上来的数据都是比特流，这些比特流对于物理层来说，无法区分其中含义，物理层要将收到数据送交给上面的数据链路层，并不是按照比特的方式，而是以帧为单位送交，因此前导码以及帧定位符都是用来告诉物理层，应该从哪一部分开始构成了一个帧，然后物理层将这个帧送交给数据链路层，所以这两个字段实际上并不是以太网的帧格式里面的字段，应该说它是为了实现数据链路层和物理层之间的通信而提供的两个控制字段。

##### 一般来说，帧格式通常是从第三个字段目的地址开始的，当然以太网中所有的源地址和目的地址都是MAC地址

##### Ethernet的Type字段的作用是为了标识数据部分所封装的分组类型

##### FCS：帧校验序列：用来检测当前在物理网络传输的时候，数据帧所传输的正确性

##### Len:用来标识当前数据部分的长度

##### Ethernet封装方式中，网络层的分组直接封装在以太网帧的数据部分，数据部分的整个内容就是IP分组或者是ARP分组

##### 对于任何物理网来说，一次所能发送的最大长度都是有所限制的，这个最大长度体现了它所采用的介质访问机制的最大传输能力，对于以太网来说，它的最大传输能力数据部分的值最大不超过1500个字节，也就意味着以太网的数据帧长一次最多只能够1518个字节，

##### 以太网的最小帧长不能低于64个字节？这是和以太网的介质访问机制有关，以太网的介质访问机制是CSMA/CD,在以太网中要想检测出冲突，那么它的最小帧长不能低于64个字节

#### 冲突（Collision）

![](/assets/18-5-5-1.png)

##### 以太网逻辑上的拓扑结构是总线型的结构，所有的主机共享同一介质，他们的每一台主机的数据都需要通过这个介质来发送，主机A发送的数据会在这根介质上面扩散出去，对于局域网的传输机制，因为使用共享介质，所以它的数据传输方式是一种广播的方式，也就是A所发送出去的数据，在这条介质上的所有站点都可以监听到，根据数据帧中的MAC目的地址来决定，如果与自己的MAC地址相一致，那么就接收，如果不一致又不是广播地址又不是他所支持的组播地址，那么站点就不会接收它所监听到的数据帧

##### 由于所有站点有发送出去的信息是在这根介质的整个范围内发送，因此当这个介质上面有多个站点需要同时发送的时候，那么就会出现冲突问题，主机A和主机B同时都在发送数据，那么在它们的信息的相遇点就会产生冲突，比如在一个双绞线上面来传输，数据都以电信号的方式发送在这根线路上面，那么在这根导线上面，如果两个电信号碰撞在一起，那么这两个信号可能会叠加，或者信号强度衰减，会造成整个信号的失真，也就意味着数据在传输过程中遭到破坏

##### 要想避免冲突在局域网中采用了多种机制，比如竞争方式，令牌环方式，

##### 冲突域：冲突发生的范围，当然也就是这些站点所共享的介质的范围，线路越长，冲突域也就越大

##### 不同的物理介质，除了对数据传输有影响之外，同时对他设备的连接方式也有影响

#### 3.3交换
##### 局域网中很少用到交换机制，通常用在广域网或者是网络层，而局域网是一种广播式的发送，不存在交换的问题
* 交换系统
 #### 有多个输入和输出的”黑盒子“
* 电路交换 Circuit Switching
* 分组交换 PacketSwitching
 ##### 数据包 Datagram
 ##### 虚电路 Virtual Circuit, VC
* 报文交换 Message Switching

##### 电路交换

* 建立连接
* 数据传输
* 拆徐连接

##### 典型实例：电话系统，每一个主机都有自己独立的信道，因此他们可以在各自的介质上面发送数据，即便是同时发送，对其他通信对象来说也没有影响。因为要建立连接，通信的两个节点之间，实际上是独占连接这条介质的，一旦它占用了这个介质，其他站点没有办法来占用这个介质

#### 分组交换

##### 数据报
##### 主机A要和X通信，主机B要和Y通信，主机A和B根据网络的特性将数据报分解成不同的大小，每一个数据报各自独立的进行传输，最后送交给目的方，A与X之间并没有建立连接，A和X之间的数据可以沿着交换式网络的不同路径来转发，接收方接收的时候，有可能出现后发送的数据先到达


